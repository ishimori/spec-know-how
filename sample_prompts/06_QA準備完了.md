# サンプルプロンプト: Gate 6 — QA 準備完了

---

## DD 起票プロンプト

> コピーして Claude に貼り付けてください。

```
以下の作業を DD に分割して起票・実行してください。
作業の粒度を判断し、適切な数の DD に分けてください（目安: 2〜3 DD）。
各 DD 完了時に DA 批判レビューを実施してください。

QA スキルを作成し、動作確認を行ってください。

> **事前スコープ確認**: 仕様書ファイルの数と合計量を確認し、
> 仕様書が多い（目安: 10 ファイル以上）場合は、
> QA スキル作成を複数 DD に分割することを提案してから作業を継続すること。
> 例: DD-A: QA スキル作成・動作確認 / DD-B: 信頼度 Low 一覧の整備

---

## 作業 1: QA スキルの作成・動作確認

- [ ] QA スキルを作成した
- [ ] QA スキルに対して実際にいくつか質問してみた
- [ ] 回答に仕様書の参照先（ファイルパス・BR番号等）が含まれている
- [ ] 仕様書に記載がない質問に対して「記載なし」と明示される

---

## 作業 2: 仕様書の品質確認

- [ ] 主要な業務ルールが仕様書に記述されている
- [ ] Conflicting 信頼度の項目が 0 件（または解消計画がある）
- [ ] 信頼度が Low の項目を一覧化した（未確認事項リスト）

---

## 作業 3: 継続的な更新の仕組み

- [ ] コードが変更されたとき、仕様書をどう更新するかを決めた
- [ ] 仕様書の管理場所（フォルダ構成）を決めた
- [ ] CLAUDE.md または document_map.md に全仕様書ファイルが登録されている
```

---

## 完了前の確認プロンプト

> DD の作業がすべて完了したら、コピーして Claude に貼り付けてください。

```
以下のことを確認してください。

- [ ] 作成した DD にしか記録されていない情報がないこと
  DD は埋もれる可能性が高いため、DD だけが持っている情報は絶対に NG です。
  重要な情報は仕様書・コンテキストファイル等に必ず転記してください。
- [ ] 新たに作成したファイルが CLAUDE.md から辿れる構造になっていること
```

---

## 横断分析（Gate 宣言前に実施）

このフェーズで作成した全 DD を横断的に分析してください。

- [ ] 各 DD を横断し、個別調査では見えなかったパターン・矛盾・見落としを発見した
- [ ] 新たな課題が見つかった場合、新規 DD 起票または既存 DD 更新を行った

> 例：「複数の DD を組み合わせて初めて見えてくるパターン（例：テーブル構造 DD と区分値 DD を合わせると DB 制約なしの重大リスクが浮かぶ）を見逃さないこと。」

---

## Gate チェックリスト（人間が確認）

> コピー不要。各項目を目視確認してください。Gate 宣言 DD を起票する前に確認してください。

**確認タイミング**: Step 6（QA スキルを作る）完了後

次のステップに進む前に、以下の項目を確認してください。

### QA スキルの動作確認

- [ ] QA スキルを作成した（または作成できる状態にある）
- [ ] QA スキルに対して実際にいくつか質問してみた
- [ ] 回答に仕様書の参照先（ファイルパス・BR番号等）が含まれている
- [ ] 仕様書に記載がない質問に対して「記載なし」と明示される

### 仕様書の品質確認

- [ ] 主要な業務ルールが仕様書に記述されている
- [ ] `Conflicting` 信頼度の項目が 0 件（または解消計画がある）
- [ ] 信頼度が `Low` の項目を一覧化した（未確認事項リスト）

### 継続的な更新の仕組み

- [ ] コードが変更されたとき、仕様書をどう更新するかを決めた
  - 例: stale フラグを立てて再確認 / 変更箇所の仕様書を即座に更新
- [ ] 仕様書の管理場所（フォルダ構成）を決めた

### DA 批判レビュー（必須）

- [ ] このステップの成果物に対して DA 批判レビューを実施した（少なくとも1件の問題を発見・対応）

> DA 批判レビューの詳細は [manuals/01_仕様書作成マニュアル.md](../manuals/01_仕様書作成マニュアル.md) を参照。

---

### 未確認事項リスト

QA 回答に自信が持てない項目、または調査が必要な項目を列挙してください。

```
（例）
- 白流れの具体的な業務定義（コードに定義なし、担当者確認中）
- 仮締め→本締めの2段階ワークフローの詳細（仕様書未記載）
- 売上データのバリデーション7件（コードには存在するが仕様書に未記載）
```

---

## Gate 宣言 DD 起票プロンプト

> Gate チェックリストの確認が終わったら、コピーして Claude に貼り付けてください。`<確認結果の要約>` と `<未解決事項>` を実際の内容に置き換えてください。

```
以下の内容のDDを作ってください。

Gate 6（QA 準備完了）の通過を宣言します。仕様抽出フェーズの完了を宣言します。

## 確認結果
- [ ] 上記の Gate チェックリストを確認した
- [ ] QA スキルが実際の質問に根拠付きで回答できることを確認した
- [ ] 全仕様書ファイルが CLAUDE.md または document_map.md に登録されている
- [ ] 信頼度 Low の未確認事項リストを作成した

## 判断
- 通過判定: 通過 / 条件付き通過 / 保留（いずれかを選択）
- 確認結果の要約: <確認結果の要約>
- 未解決事項（ある場合）: <未解決事項と解消計画>

## 次のステップ
- [ ] 実装フェーズ（GUIDE_IMPL.md）に進む
```
