# サンプルプロンプト: Gate 3 — 画面・UI

対応 Gate: [gates/03_screens.md](../gates/03_screens.md)

---

## DD 起票プロンプト

> `<コードベースのパス>` を実際のパスに置き換えてください。

```
以下の作業を DD に分割して起票・実行してください。
作業の粒度を判断し、適切な数の DD に分けてください（目安: 2〜3 DD）。
各 DD 完了時に DA 批判レビューを実施してください。

<コードベースのパス> のコードベースを分析し、画面・UIについて以下を行ってください。

> **事前スコープ確認**: 画面数を概算で把握し、
> 画面数が多い（目安: 15 以上）場合は、
> 調査範囲を分割した DD を提案してから作業を継続すること。
> 例: DD-A: 画面一覧・画面遷移 / DD-B: 権限・ロール制御 / DD-C: ビジネスロジック確認

---

## 作業 1: 画面一覧・画面遷移の整備

- [ ] 画面一覧を作成した（画面名・URL/パス・主な機能）
- [ ] モーダル・ダイアログなど補助的な画面も含めて把握した
- [ ] 画面に紐づく API エンドポイントを把握した
- [ ] 主要な操作フロー（Happy Path）を把握した
  - 例: 申請→承認→通知、入力→確認→完了
- [ ] 画面遷移を図または文章で整理した

---

## 作業 2: 権限・ロール制御

- [ ] 権限・ロールによる表示制御の有無を確認した
- [ ] 同じ画面でも権限によって操作できる内容が変わる場合、その条件を把握した
- [ ] **認可マトリクスを作成した**（旧システムの事実記録として・新システム設計ではない）
  - 行: ロール種別（全種別を列挙）/ 列: 画面またはアクション / セル: ○/×/条件付き
- [ ] **複数ロールを持つユーザー（兼務・ゲスト等）が存在する場合、その挙動を確認した**
  - 兼務ユーザーがどの画面にアクセスできるかを明示した
  - ロール判定の優先順位（主務ロール vs 兼務ロール）を確認した

---

## 作業 3: ビジネスロジックの在処

- [ ] submit/save 関数に業務ロジック・バリデーションが含まれていないか確認した
- [ ] 作成した画面仕様書ファイルを CLAUDE.md または document_map.md に追記した
```

---

## 完了前の確認プロンプト

DD の作業がすべて完了したら、以下をコピーして Claude に貼り付けてください。

```
以下のことを確認してください。

- [ ] 作成した DD にしか記録されていない情報がないこと
  DD は埋もれる可能性が高いため、DD だけが持っている情報は絶対に NG です。
  重要な情報は仕様書・コンテキストファイル等に必ず転記してください。
- [ ] 新たに作成したファイルが CLAUDE.md から辿れる構造になっていること
```

---

## 横断分析（Gate 宣言前に実施）

このフェーズで作成した全 DD を横断的に分析してください。

- [ ] 各 DD を横断し、個別調査では見えなかったパターン・矛盾・見落としを発見した
- [ ] 新たな課題が見つかった場合、新規 DD 起票または既存 DD 更新を行った

> 例：「複数の DD を組み合わせて初めて見えてくるパターン（例：テーブル構造 DD と区分値 DD を合わせると DB 制約なしの重大リスクが浮かぶ）を見逃さないこと。」

---

## Gate 宣言 DD 起票プロンプト

> `<確認結果の要約>` と `<未解決事項>` を実際の内容に置き換えてください。

```
以下の内容のDDを作ってください。

Gate 3（画面・UI）の通過を宣言します。

## 確認結果
- [ ] gates/03_screens.md のチェックリストを確認した
- [ ] チェックリストの各項目の確認結果を記録した
- [ ] 作成した画面仕様書ファイルを CLAUDE.md または document_map.md に追記した

## 判断
- 通過判定: 通過 / 条件付き通過 / 保留（いずれかを選択）
- 確認結果の要約: <確認結果の要約>
- 未解決事項（ある場合）: <未解決事項と解消計画>

## 次のステップ
- [ ] Step 4（業務ロジック抽出）に進む（Step 2 が完了している場合）
```
