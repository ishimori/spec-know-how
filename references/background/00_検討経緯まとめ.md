# 検討経緯まとめ：StreamlitからReact/FastAPIへの移行

## 1. 課題の認識
現在の「Housing E-Kintai」システム（Streamlit製）は、プロトタイプの域を超えて成長し、以下の課題に直面している。
- **保守性の限界**: 画面のわずかな変更が全再実行を引き起こすStreamlitの構造により、複雑な業務ロジック（給与・歩合計算）の保守が困難。
- **UI/UXの制約**: 独自UIの実装コストが高く、ステート管理が複雑化している。
- **将来性**: 今後5年以上の長期運用と、AIによる保守自動化を見据えると、現在のアーキテクチャは不適。

## 2. 採用されたアーキテクチャ
**「React (TypeScript) + FastAPI (Python)」** への完全移行を決定。
- **Frontend**: React, TypeScript, Tailwind CSS, shadcn/ui
- **Backend**: FastAPI, Pydantic (Python)
- **DB**: PostgreSQL（既存利用）

## 3. 移行方針の変遷
当初は「ロジックを流用してUIだけReact化」も検討されたが、以下の理由により**「完全リエンジニアリング（作り直し）」**を選択した。
- 既存のStreamlit依存ロジック（セッション、キャッシュ）をそのまま移植すると、潜在的なバグも継承してしまう。
- AIによる保守性を最大化するため、ステートレスで型安全なクリーンアーキテクチャへ刷新すべきである。

## 4. 品質保証戦略（AIネイティブ・クオリティ・コントロール）
「AIにコードを書かせる」ことのリスク（ハルシネーション）を構造的に排除するため、以下の厳格なプロセスを採用する。

1.  **3段階の工程**:
    1.  **Code to Spec**: 現行コードから仕様書を逆生成。
    2.  **Spec to Test Spec**: 仕様書からテスト仕様書（合格基準）を作成。
    3.  **Implement & Verify**: テスト仕様書に基づいて実装・検証。

2.  **ハルシネーション対策**:
    - **機械的抽出**: ロジックや計算式をスクリプトで機械的に抽出。
    - **クロス・ベリフィケーション**: 複数のAIセッションで仕様を生成し、突合して不整合を炙り出す。
    - **Devil's Advocate（悪魔の代弁者）**: 批判的視点を持つAIによるレビューを繰り返し、不具合リスクを徹底的に潰す。

## 5. 次のアクション
- **対象選定**: 最も複雑なモジュール（例：歩合計算）をPoC対象とする。
- **ドキュメント整備**: 「高信頼リエンジニアリング基本方針書」および「移行計画書」の策定。
