# spec-know-how 認識合わせチェックリスト（v0.1）

## 1. 目的

`spec-know-how` の使い方について、ユーザーとCodexの認識が一致しているかを事前に判定する。

---

## 2. 合意チェック（開始前）

以下が `Yes` なら開始してよい。

1. `spec-know-how` はDD代替ではなく前段オーケストレーターである
2. 抽出対象はFRだけでなくNFRを含む
3. Phase0ヒアリングを省略しない
4. ワークフローは実装せず、DDに指示する
5. 機械抽出方式はプロジェクトに応じて選択する
6. QA回答は「回答 + 信頼度 + 根拠行」で返す
7. 実装DDは人間主導で進める
8. 抽出器妥当性検証（Phase 2.5）を通さずに `High` 判定しない
9. **【新規】生成物は分析対象プロジェクト配下ではなく、実行元プロジェクト配下に作成する** ← 重要

**補足（項目 9）**:
- **分析対象**: `/path/to/legacy-system/` （読取専用で扱う）
- **生成物の出力先**: `/path/to/current-project/doc/spec/projects/legacy-system/`
  - 生成物は本プロジェクト配下に集約することで、複数プロジェクトの仕様を一元管理できる
  - 分析対象プロジェクトは汚さない

`No` が1つでもある場合は、開始せずに前提を再定義する。

---

## 3. フェーズ完了判定（Gate）

## Gate 0（ヒアリング完了）
- 移行元/移行先/対象ドメイン/NFR優先度が明記されている
- 抽出対象と除外対象が定義されている
- 法務/機密/PII制約が記録されている

## Gate 1（抽出計画完了）
- FR抽出DD、NFR抽出DD、UX操作モデルDDが起票されている

## Gate 2（機械抽出完了）
- 抽出結果と実行証拠が保存されている
- 抽出漏れ・失敗が記録されている

## Gate 2.5（抽出器妥当性確認完了）
- 抽出器検証レポートがある
- 既知制約が明文化されている

## Gate 3（抽象化仕様完了）
- 各仕様項目に根拠参照がある
- 各仕様項目に信頼度（4段階: High/Medium/Low/Conflicting）がある
- `Conflicting` 項目が残っている場合は次フェーズに進めない（ブロッキング）

## Gate 4（QA化完了）
- QA回答テンプレートで回答可能
- 根拠行に遷移できる
- 対象コミットSHAと生成日時が回答メタ情報として出力される

## Gate 5（継続改善完了）
- `Conflicting` 信頼度の仕様項目が 0件
- 各重要課題に解決条件が定義されている
- 高重要度の未解決課題に全て対応方針（DD or 保留理由）がある
- 中重要度以下は未解決でも完了可（バックログに残す）

---

## 4. 受入条件（Definition of Done）

以下を満たしたら、抽象化抽出フェーズを完了とする。

1. FR/NFR/UXM の3領域が抽出済み  
2. 未解消事項が一覧化されている  
3. QA応答が根拠付きで再現可能  
4. 実装チームへ引き渡す入力一式が揃っている  
5. QAインデックス鮮度（最終更新時刻・生成元コミット）が記録されている
6. 問題発見と改善ログが記録されている  

---

## 5. よくある認識齟齬

1. **「spec-know-how が実装DDも作るはず」**
   - 補正: 実装DDは対象外。人間主導。

2. **「NFRは後で見る」**
   - 補正: NFR後回しは手戻り原因。抽出段階で並行実施。

3. **「機械抽出は1回作れば全案件で同じ」**
   - 補正: 技術差があるためモジュール選択型で運用。

4. **「QAは答えだけ返せばよい」**
   - 補正: 根拠と信頼度がない回答は採用しない。

5. **「スキルは常に最新を取ればよい」**
   - 補正: バージョン固定（タグ or SHA）で再現性を確保する。

6. **「問題は人間が見つける分だけで十分」**
   - 補正: 生成AIにも問題発見を担わせ、解決条件まで反復する。

---

## 6. 改版ルール

- 案件ごとに「失敗パターン」を追記する
- 半期ごとに質問票とGate条件を見直す
- 変更時は `01`〜`05` の整合を同時確認する
