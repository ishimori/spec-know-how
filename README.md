# spec-know-how

**レガシーシステムのリエンジニアリング（仕様抽出 → 実装）のための実践ガイド集**

---

## なぜこのリポジトリが必要か

LLM（Claude Code 等）を使えばコードは速く書ける。しかし「何を作るべきか」を正しく伝えられなければ、速く間違ったものが出来上がるだけです。

レガシーシステムの作り直しでは、この問題が特に深刻になります:

- **仕様書がない**（あっても古い）。LLM に「この仕様で作って」と言えない
- **コードに埋まった業務ルール**を見落とし、移行後に「前はできたのに」が頻発する
- **LLM の出力を検証する基準がない**。「動いているから正しい」で進めてしまう
- **作業の進め方が属人的**。何から手をつけ、どこまでやれば十分かの判断基準がない

このリポジトリは、44DD（Design Decision）以上の実プロジェクト経験から抽出した**手順・判断基準・失敗パターン**を提供します。LLM を「速く書くツール」から「正しく作り直すパートナー」に変えるためのガイドです。

---

## この参考書でできること

| コンテンツ | 内容 |
|-----------|------|
| [GUIDE.md](GUIDE.md) | **仕様抽出**のクイックリファレンス（Step 1〜6）。どこから始めて何を把握すればいいかを示す |
| [GUIDE_IMPL.md](GUIDE_IMPL.md) | **実装**のクイックリファレンス（Step 1〜5）。仕様書完成後、どう作り直すかを示す |
| [manuals/](manuals/) | **実践マニュアル**（包括ガイド）。「なぜ・どうやるか」の詳細 + ゲート定義 + アンチパターン |
| [gates/](gates/) | 各ステップの通過基準チェックリスト。「次に進んでいいか」を人間が判断するために使う |
| [how-to/qa-skill.md](how-to/qa-skill.md) | プロジェクト固有の QA スキルの作り方 |
| [references/](references/) | 教訓（44DD以上の実践から得た知見） |

### クイックリファレンスとマニュアルの役割分担

|  | クイックリファレンス | 包括マニュアル |
|--|-------------------|--------------|
| **仕様抽出**（コードを書く前） | [GUIDE.md](GUIDE.md) | [manuals/01](manuals/01_仕様書作成マニュアル.md) |
| **実装**（コードを書く） | [GUIDE_IMPL.md](GUIDE_IMPL.md) | [manuals/02](manuals/02_実装マニュアル.md) |

- **クイックリファレンス** = 「何をするか」のチェックリスト形式。手を動かしながら見る
- **包括マニュアル** = 「なぜ・どうやるか」の詳細 + ゲート定義 + アンチパターン。判断に迷ったとき読む

### ステップ対応表

各ドキュメントはステップ番号が異なります。以下の対応表で読み替えてください。

| GUIDE.md（仕様抽出） | GUIDE_IMPL.md（実装） | manuals/01（仕様作成） | manuals/02（実装） |
|---------------------|---------------------|----------------------|-------------------|
| — | — | Step 1: 移行判断 | — |
| Step 1: 対象を把握する | — | Step 2: ドキュメント棚卸し | — |
| Step 2-3: DB・画面 | — | Step 3: 業務ロジック抽出 | — |
| Step 4: 業務ロジック | — | Step 3: 業務ロジック抽出 | — |
| Step 5: 非機能要件 | — | Step 4-5: 設計・横断検証 | — |
| Step 6: QA スキル | — | — | — |
| — | Step 1: 垂直スライス | — | Step 1: 垂直スライス |
| — | Step 2: 核機能 | — | Step 2: 核機能 |
| — | Step 3: 放射的実装 | — | Step 3: 放射的実装 |
| — | Step 4: 品質ゲート | — | Step 4: 品質ゲート |
| — | Step 5: 拡張・デプロイ | — | Step 5: 拡張・デプロイ |

> Gate の番号体系は各ドキュメントで独立しています。GUIDE.md の Gate 3 と GUIDE_IMPL.md の Gate 3 は別のものです。

---

## 読者別の使い方

### 開発者（コードを読む・書く人）

1. [GUIDE.md](GUIDE.md) で仕様抽出の全体像を把握する
2. Step ごとに作業を進め、終わったら該当の Gate でチェックする
3. 情報が揃ったら [how-to/qa-skill.md](how-to/qa-skill.md) を参考に QA スキルを作る
4. [GUIDE_IMPL.md](GUIDE_IMPL.md) で実装の全体像を把握し、構築に進む

### プロジェクトリーダー・SA

1. [GUIDE.md](GUIDE.md) + [GUIDE_IMPL.md](GUIDE_IMPL.md) でプロセス全体を把握する
2. 各 Gate チェックリストを使って「次に進んでいいか」を確認する
3. Gate が通過できていない場合は追加調査・修正を指示する

---

## 構成

```
spec-know-how/
├── GUIDE.md                      # 仕様抽出クイックリファレンス（Step 1〜6）
├── GUIDE_IMPL.md                 # 実装クイックリファレンス（Step 1〜5）
├── manuals/                      # 実践マニュアル（包括ガイド）
│   ├── 01_仕様書作成マニュアル.md # 仕様抽出の詳細手順・ゲート・アンチパターン
│   └── 02_実装マニュアル.md       # 実装の詳細手順・ゲート・アンチパターン
├── gates/                        # ゲートチェックリスト（6種）
│   ├── README.md                 # ゲートの使い方
│   ├── 01_initial_survey.md      # Gate 1: 初回調査
│   ├── 02_database.md            # Gate 2: DB・データモデル
│   ├── 03_screens.md             # Gate 3: 画面・UI
│   ├── 04_business_logic.md      # Gate 4: 業務ロジック
│   ├── 05_nfr.md                 # Gate 5: 非機能要件
│   └── 06_qa_ready.md            # Gate 6: QA 準備完了
├── how-to/
│   └── qa-skill.md               # QA スキルの作り方
└── references/
    └── lessons_learned.md        # 教訓（44DD以上の経験）
```

---

## 実績

`housing-e-kintai-next`（Streamlit → React+FastAPI 移行）で実践:

- 約 4,300 行のビジネスロジックを仕様書化
- 195+ 項目をコードと突合して検証
- 44 DD 以上の経験から得た教訓を [references/lessons_learned.md](references/lessons_learned.md) にまとめ

---

## ライセンス

MIT License
