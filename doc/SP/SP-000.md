# SP-000: 環境プロファイリング

| 作成日 | 更新日 | ステータス |
|--------|--------|------------|
| - | - | 未開始 |

---

## このSPシリーズの最終ゴール

このドキュメント群（SP-000〜SP-006）は **[manuals/01_仕様書作成マニュアル.md](../manuals/01_仕様書作成マニュアル.md) の Step 0〜4** を実行するための作業チケット群です。

**最終目標**: レガシーシステムから仕様書を機械的・体系的に抽出し、**生成AIを主力ツールとしたリエンジニアリングに耐える高品質な仕様書（[VERIFIED]ラベル付き）**を揃える。

| フェーズ | 対応SP | ゴール |
|--------|--------|-------|
| Step 0: 移行判断 | SP-000 | 「作り直すべきか？」の判断と品質保証戦略の確立 |
| Step 1: ドキュメント棚卸し | SP-001 | コードベース・ドキュメントの全量把握と信頼度評価 |
| Step 2: 業務ロジック抽出 | SP-002 | DB スキーマ・コードから仕様書を機械的に抽出 |
| Step 3: 設計 | SP-003〜005 | 画面・API・外部連携の仕様化 |
| Step 4: 横断検証 | SP-006 | 全仕様書の整合性確認と Gate 通過 |

> **Quality In, Quality Out** — 仕様書の品質が後工程の速度と品質を決定する。
> 調査結果は必ず記録し、確認済み事実と推測を区別して信頼度ラベルを明示すること。

---

## 【Claude への指示】⚠️ 必読

このファイルを読んだら、**作業を始める前に**以下を実行すること：

1. 「環境プロファイリングを開始します」とユーザーに伝える
2. 以下の「質問リスト」の質問を**1問ずつ**ユーザーに投げかける
3. 各回答を「環境プロファイル」セクションの対応セルに即座に記録する
4. 全項目完了後、プロファイルの内容を読み上げて「この内容で正しいですか？」と確認する
5. ユーザーが確認したら、ステータスを「完了」に更新し、作成日・更新日を記入する

> **注意**: 質問を飛ばしてはいけない。「わからない」「未確認」も回答として記録する。

---

## 質問リスト

### グループA: 基本情報・作業目的
1. このプロジェクトで仕様抽出を行う**目的**は何ですか？
   - 仕様をドキュメント化したい（記録・引き継ぎ目的）
   - 新システムへのリエンジニアリング（作り直し）前提
   - その他（→ 具体的に）
2. プロジェクト名を教えてください
3. コードベースのパス（またはリポジトリ URL）を教えてください
4. バックエンドの言語・フレームワークは何ですか？（例: Python/Django、Java/Spring Boot）

### グループB: 既存ドキュメント（SP-001 で使用）
5. 既存の設計書・仕様書は存在しますか？（画面仕様書、DB定義書、API設計書など）
   - あり（→ どんなものがあるか概要を教えてください）
   - なし
   - 一部あり（→ どんなものがあるか概要を教えてください）

### グループC: データベース（SP-002 で使用）
6. データベースはありますか？（はい / いいえ）
7. （DBあり の場合）スキーマ情報はどの形式で入手できますか？
   - DDL ファイル
   - DUMP ファイル
   - マイグレーションファイル（例: Alembic、Flyway、ActiveRecord）
   - ER 図・設計書
   - なし（コードのモデル定義のみ）
   - その他（→ 具体的に）
8. （DBあり の場合）データベースの種類は？（例: PostgreSQL、MySQL、SQLite）

### グループD: フロントエンド（SP-003 で使用）
9. フロントエンド（画面・UI）はありますか？（はい / いいえ）
10. （あり の場合）フロントエンドのフレームワーク・構成は？
    - React / Vue / Angular
    - 静的 HTML
    - テンプレートエンジン（Jinja2、Thymeleaf 等）
    - その他（→ 具体的に）

### グループE: 外部連携・認証（SP-004・SP-005 で使用）
11. 外部システムとの連携はありますか？（はい / いいえ）
12. （あり の場合）連携している外部システムの数は？（概数でよい）
13. 認証方式は何ですか？
    - セッション認証
    - JWT
    - OAuth / SAML（SSO）
    - 認証なし
    - 不明
    - その他（→ 具体的に）

### グループF: 機械処理（SP-001 以降で使用）
14. 機械処理スクリプト（ファイル数・LOC 計測、依存関係抽出など）の実行環境を教えてください
    - Python（→ UV で仮想環境を作成して実行）
    - Node.js（→ インストール状況を確認して実行）

---

## 環境プロファイル

> Claude がユーザーの回答を記録するセクション

### 基本情報・作業目的

| 項目 | 値 |
|------|-----|
| 作業目的 | - |
| プロジェクト名 | - |
| コードベースのパス / URL | - |
| バックエンド言語 | - |
| バックエンドフレームワーク | - |

### 既存ドキュメント

| 項目 | 値 |
|------|-----|
| 既存ドキュメント有無 | - |
| 主なドキュメント | - |

### データベース

| 項目 | 値 |
|------|-----|
| DB 有無 | - |
| スキーマ情報の形式 | - |
| DB の種類 | - |

### フロントエンド

| 項目 | 値 |
|------|-----|
| フロントエンド有無 | - |
| フレームワーク / 構成 | - |

### 外部連携・認証

| 項目 | 値 |
|------|-----|
| 外部システム連携 | - |
| 連携システム数 | - |
| 認証方式 | - |

### 機械処理

| 項目 | 値 |
|------|-----|
| 機械処理言語 | - |

---

## 回答パターンと SP への影響

> **全組み合わせではなく、SP の進め方が変わるキー分岐点のみ記載**

| 質問 | 回答 | SP への影響 |
|------|------|------------|
| 作業目的 | リエンジニアリング | SP-001 で現行と新システムの比較観点を追加。SP-004 で移行リスク・データ移行設計も対象 |
| 作業目的 | ドキュメント化 | SP-001〜006 を標準フローで進める |
| 既存ドキュメント | あり | SP-001 は棚卸しから開始。信頼度ラベルを付与しながら進める |
| 既存ドキュメント | なし | SP-001 はコードから直接調査。棚卸し作業は不要 |
| DB 有無 | なし | **SP-002 はスキップ** |
| DB 有無 + スキーマ形式 | あり + なし（モデル定義のみ） | SP-002 の難易度が高い。コードのモデル定義から読み取る作業が必要 |
| フロントエンド有無 | なし（API のみ） | **SP-003 はスキップ**（ただし API 仕様は SP-004 で扱う） |
| 外部連携数 | 5以上 | SP-005 の分割を推奨（2〜3 SP に分割） |
| 認証方式 | OAuth / SAML | SP-005 で認証フロー仕様の確認工数が増える |
| 機械処理言語 | Python | SP-001-02 で `uv --version` 確認 → `uv venv .venv` で仮想環境作成後にスクリプト実行 |
| 機械処理言語 | Node.js | SP-001-02 で `node --version` 確認後にスクリプト実行 |

---

## SP への引き継ぎメモ

> Claude が確認後に記載する：環境プロファイルから読み取れる注意点・スキップ推奨の SP

| SP | 対応方針 |
|----|---------|
| SP-001 | 常に実施。既存ドキュメントあり → SP-001-03 の棚卸しから / なし → SP-001-03 の棚卸しスキップ。機械処理言語を SP-001-02 に引き継ぐ |
| SP-002 | DB 有無: - → （記載予定） |
| SP-003 | フロントエンド有無: - → （記載予定） |
| SP-004 | 常に実施。リエンジニアリング目的 → 移行リスク観点を追加 |
| SP-005 | 常に実施 |
| SP-006 | 常に実施 |
