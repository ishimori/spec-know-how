# SP-006-gate: Gate 6 チェック

## このチケットの位置づけ

**全体目標**: このSPシリーズは [manuals/01_仕様書作成マニュアル.md](../../manuals/01_仕様書作成マニュアル.md) の Step 6（QA スキルを作る）完了を目指す — 全仕様書の品質を確認し、QA スキルが高精度な回答を返せる状態を保証する

**マニュアル対応**: [manuals/01_仕様書作成マニュアル.md](../../manuals/01_仕様書作成マニュアル.md) — **Gate 6「QA 準備完了チェックリスト」**（sample_prompts/06_QA準備完了.md の Gate チェックリスト対応）

**目的**: SP-006 の全子チケットが完了したことを機械検証・LLM 検証・DA 分析の 3 段階で確認し、Gate 6 通過可否（= 仕様抽出フェーズの完了）のサマリーを生成する

**最終的な使われ方**: Claude が Gate 判定サマリーを提示し、人間が Go/No-Go 宣言の DD を起票する。通過すれば実装フェーズ（GUIDE_IMPL.md）に進む

**実行 Phase の判断**:

| Phase | 実行条件 |
|-------|---------|
| Phase 1〜6 | 常に実行（SP-006-03 完了後） |

---

## Phase 1: 前提確認（LLM）

SP-006 の全子チケットのステータスを確認する。

- [ ] SP-006-01 が「完了」であることを確認した
- [ ] SP-006-02 が「完了」であることを確認した
- [ ] SP-006-03 が「完了」であることを確認した
- [ ] 動的追加チケット（SP-006-02-xx 等）がある場合、すべて「完了」であることを確認した

---

## Phase 2: 機械検証

> 実コマンドを実行して結果を記録すること。推測・記憶に頼った記入禁止。

- [ ] SP-006-02 で作成した QA スキル定義ファイルが実際に存在することを確認した
- [ ] `CLAUDE.md` または `document_map.md` に全仕様書ファイルが登録されていることを確認した
- [ ] SP-006-03 で決定した更新フローが `CLAUDE.md` または `document_map.md` に追記されていることを確認した

### 機械検証記録

> 貼り付けフォーマット（監査用）:
> ```
> # 実行コマンド
> <ここにコマンドを記載>
> # 実行結果
> <ここに出力を貼り付け>
> ```

---

## Phase 3: LLM 検証

> 先行子チケットのファイルを実際に読んで確認すること。「たぶん書いてあった」禁止。

- [ ] SP-006-01 を読み、Low/Conflicting の項目一覧（または「なし」の記録）があることを確認した
- [ ] SP-006-01 を読み、全仕様書ファイルに信頼度ラベルが付いていることを確認した
- [ ] SP-006-01 を読み、暗黙ルール候補の確認状況が記録されていることを確認した
- [ ] SP-006-02 を読み、QA スキルの動作確認記録（3 件以上の質問・OK/NG 結果）があることを確認した
- [ ] SP-006-02 を読み、「仕様書に記載がない質問」に対して「記載なし」と回答できることを確認した
- [ ] SP-006-03 を読み、更新フローの決定内容が記録されていることを確認した

### 検証記録

| チェック項目 | 確認結果 | 備考 |
|-----------|---------|------|
| Low/Conflicting 一覧（または「なし」） | OK / NG / 部分的 | - |
| 全仕様書の信頼度ラベル付与 | OK / NG / 部分的 | - |
| 暗黙ルール候補の確認状況 | OK / NG / 部分的 | - |
| QA スキル動作確認（3 件以上・参照先付き） | OK / NG / 部分的 | - |
| 「記載なし」応答の確認 | OK / NG | - |
| 継続的更新フローの決定 | OK / NG | - |

---

## Phase 4: DA 分析（全体横断）

> SP-006 全体を通じて「仕様抽出フェーズとして完了と言えるか」を批判的に評価する。
> **特に注意**: Low 項目の放置・QA スキルが答えられない質問パターン・更新フローが形骸化しないか。
> 問題がなければ「なし」と記録すること（無理に問題を作らない）。

| # | 発見した問題・懸念 | 重要度 | 対応方針 |
|---|----------------|--------|---------|
| - | なし | - | - |

---

## Phase 5: コンテキスト最終回収

> SP-006 全子チケットの作業を通じて会話コンテキストにのみ残っている情報を最後にすべて回収する。
> **これが仕様抽出フェーズ全体の最終コンテキスト回収になる。**

- [ ] 全子チケット・全調査を通じてコンテキストにしか残っていない情報がないか確認し、
      あれば該当仕様書ファイルまたは `CLAUDE.md` に追記した

---

## Phase 6: Gate 判定サマリー（Claude が生成）

> Claude が Phase 1〜5 の結果を基にサマリーを生成し、ユーザーに提示する。

### Gate 6 判定サマリー

| 検証項目 | 結果 | 備考 |
|---------|------|------|
| 全子チケット完了確認（Phase 1） | - | - |
| QA スキルファイル存在確認（Phase 2） | - | - |
| 全仕様書 CLAUDE.md 登録確認（Phase 2） | - | - |
| Low/Conflicting 一覧（Phase 3） | - | - |
| 仕様書信頼度ラベル（Phase 3） | - | - |
| QA スキル動作確認（Phase 3） | - | - |
| 継続的更新フロー決定（Phase 3） | - | - |
| 横断 DA 分析（Phase 4） | - | - |

**推奨判定**: 通過 / 条件付き通過 / 保留

**懸念事項**（ある場合）:
- （なし）

**未確認事項リスト（Low 項目の要約）**:
> SP-006-01 の Low 項目一覧から転記する。

| 項目 | アクション |
|------|----------|
| - | - |

---

## 完了時の確認

- [ ] SP-006 の子チケット一覧の本チケットを「完了」に更新した
- [ ] 上の Gate 判定サマリーをユーザーに提示した

---

## Gate 宣言 DD 起票プロンプト

> Gate 判定サマリーを確認後、コピーして Claude に貼り付けてください。
> `<確認結果の要約>` と `<未解決事項>` を実際の内容に置き換えてください。

```
以下の内容のDDを作ってください。

Gate 6（QA 準備完了）の通過を宣言します。仕様抽出フェーズの完了を宣言します。

## 確認結果
- [ ] SP-006-gate の Gate チェックを完了した
- [ ] QA スキルが実際の質問に根拠付きで回答できることを確認した
- [ ] 全仕様書ファイルが CLAUDE.md または document_map.md に登録されている
- [ ] 信頼度 Low の未確認事項リストを作成した
- [ ] 継続的更新フローを決定・記録した

## 判断
- 通過判定: 通過 / 条件付き通過 / 保留（いずれかを選択）
- 確認結果の要約: <確認結果の要約>
- 未解決事項（ある場合）: <未解決事項と解消計画>
- 未確認事項（Low 項目）: <件数と主な項目>

## 次のステップ
- [ ] 実装フェーズ（GUIDE_IMPL.md）に進む
```
