# SP-006-03: 継続的更新の仕組み決定

## このチケットの位置づけ

**全体目標**: このSPシリーズは [manuals/01_仕様書作成マニュアル.md](../../manuals/01_仕様書作成マニュアル.md) の Step 6（QA スキルを作る）完了を目指す — 全仕様書の品質を確認し、QA スキルが高精度な回答を返せる状態を保証する

**マニュアル対応**: [manuals/01_仕様書作成マニュアル.md](../../manuals/01_仕様書作成マニュアル.md) — **Step 6「QA スキルを作る」**

**目的**: コードが変更されたときに仕様書が古くなることを防ぐ更新フローを決定し、記録する

**最終的な使われ方**: 決定した更新フローは仕様書管理のドキュメント（`CLAUDE.md` または `document_map.md`）に記録し、プロジェクトメンバーが参照できるようにする

**実行 Phase の判断**:

| Phase | 実行条件 |
|-------|---------|
| Phase 1 | 常に実行（更新フローの決定） |

---

## Phase 1: 継続的更新フローの決定

- [ ] コードが変更されたときの仕様書更新フローをユーザーと確認・決定した
- [ ] 仕様書が陳腐化した（stale になった）場合の対処方法を決定した
- [ ] 決定した更新フローを `CLAUDE.md` または `document_map.md` に追記した

### 更新フローの選択肢（ユーザーに提示して確認する）

| 方式 | 説明 | 向いているケース |
|------|------|--------------|
| **即時更新** | コード変更と同タイミングで仕様書を更新する | 仕様書を常に最新に保ちたい場合 |
| **stale フラグ** | 変更された仕様書に `[STALE]` を付与し、後でまとめて更新する | 更新タイミングを柔軟にしたい場合 |
| **定期レビュー** | 一定期間ごと（スプリント単位等）に仕様書を棚卸しする | 更新コストを抑えたい場合 |

### 決定した更新フロー

| 項目 | 決定内容 |
|------|---------|
| 更新フロー方式 | 即時更新 / stale フラグ / 定期レビュー / その他（） |
| 仕様書変更のトリガー | （例: PR マージ時 / コードレビュー時 / リリース前）|
| stale 検知の仕組み | （例: `[STALE]` ラベル付与 / Git Blame 確認 / なし）|
| 担当者・責任範囲 | - |

### CLAUDE.md / document_map.md への追記（記録）

> 実際に追記した内容を貼り付ける（監査用）。

```
（追記内容をここに貼り付け）
```

---

## DA 分析（このチケットのスコープ限定）

> 「仕様書の更新フローが「誰もやらない」状態に陥るリスクはないか？担当者・トリガーが曖昧ではないか？」の観点で批判的に確認する。
> 問題がなければ「なし」と記録すること（無理に問題を作らない）。

| # | 発見した問題・懸念 | 重要度 | 対応方針 |
|---|----------------|--------|---------|
| - | なし | - | - |

---

## コンテキスト回収

- [ ] コンテキストにしか残っていない重要な情報がないか確認した

---

## 発覚した追加タスク

| タスク内容 | 対応先 | 優先度 |
|----------|--------|--------|
| - | - | - |

---

## 完了時の確認

- [ ] SP-006 の子チケット一覧の本チケットを「完了」に更新した
