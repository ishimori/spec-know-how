# DD-{番号}: 定量棚卸し

| 作成日 | 更新日 | ステータス | ステージ |
|--------|--------|------------|----------|
| {日付} | {日付} | 進行中 | Stage 1 |

## 前提 DD

なし（最初に実行する DD）

## スキップ判定

スキップ不可。全ての後続 DD の基盤となる。

## 目的

対象コードベースの全体像を定量的に把握する。
Claude が「どこに何があるか」を理解できる状態を作る。

## 背景・課題

仕様抽出の前提として、コードベースの規模・構造・技術スタックを
客観的なデータで把握する必要がある。推測ではなく事実ベースで進める。

## 検討内容

（調査中に判明した特記事項をここに記録）

## 決定事項

（調査完了後に記入）

## 成果物

| 成果物 | 配置先 | 状態 |
|--------|--------|------|
| ファイル構造レポート | 本 DD 内 | 未作成 |
| モジュール構造マップ | 本 DD 内 | 未作成 |
| 依存関係マップ | 本 DD 内 | 未作成 |
| 既存ドキュメント一覧 | 本 DD 内 | 未作成 |
| 技術スタックサマリー | 本 DD 内 | 未作成 |

## タスク一覧

### Phase 0: 事前精査
- [ ] 📋 各 Phase のタスク精査・詳細化
- [ ] 📋 コードベースパスの確認とアクセス検証
- [ ] 😈 **Devil's Advocate調査**

### Phase 1: ファイル構造分析
- [ ] ディレクトリツリーの取得（深さ3階層まで）
- [ ] ファイル種別ごとの集計（.py, .js, .ts, .html, .sql 等）
- [ ] テストファイルの比率
- [ ] 設定ファイルの一覧（package.json, requirements.txt, Dockerfile 等）
- [ ] 😈 **DA批判レビュー（「このPhaseで何が壊れるか」を最低1件発見）**

### Phase 2: コード構造分析
- [ ] モジュール/パッケージの一覧と LOC
- [ ] エントリーポイントの特定（main, app, index 等）
- [ ] 公開 API / ルーティングの一覧
- [ ] クラス・関数の数（モジュール別）
- [ ] 😈 **DA批判レビュー（「このPhaseで何が壊れるか」を最低1件発見）**

### Phase 3: 依存関係分析
- [ ] 外部ライブラリの一覧とバージョン
- [ ] モジュール間の内部依存（import/require の関係）
- [ ] DB 関連ファイルの特定（マイグレーション、モデル、SQL）
- [ ] 外部 API 連携の特定
- [ ] 😈 **DA批判レビュー（「このPhaseで何が壊れるか」を最低1件発見）**

### Phase 4: 既存ドキュメント棚卸し
- [ ] README, CHANGELOG, doc/ 等の既存ドキュメント一覧
- [ ] コメント密度の概算（主要ファイル数件をサンプリング）
- [ ] 既存テストの網羅率推定（テストファイル数 / ソースファイル数）
- [ ] 😈 **DA批判レビュー（「このPhaseで何が壊れるか」を最低1件発見）**

## ログ

### {日付}
- DD作成（spec-know-how 起動時に自動生成）

---

## DA批判レビュー記録

### Phase N DA批判レビュー

**DA観点:** （このPhaseで最も壊れやすいポイントは何か？）

| # | 発見した問題/改善点 | 重要度 | 再現手順（高/中は必須） | DA観点 | 対応 |
|---|-------------------|--------|----------------------|--------|------|
| 1 | (具体的に記述) | 高/中/低 | (高/中: 操作→結果) | (どのDA観点で発見したか) | ✅修正済/⏭️別DD/❌不要 |
